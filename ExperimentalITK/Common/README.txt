
the difference is that AlocateUpdateBuffer  is moved
from private to protected
